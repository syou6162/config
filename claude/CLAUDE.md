## 全般的なルール

- 日本語で返答してください
- 手順が複雑になる場合、実行の前にチェックリストを作成し、方針が問題ないかをユーザーに尋ねてください
- ユーザーが「k」とだけ発言した際は「ok」や「問題ありません」の意味です
  - 一文字で入力できて便利なため、ユーザーはこういった表現を使います
- 実装中に技術的に詰まったところやわからないところ、解決できないエラーなどがあればcodex mcp(`mcp__codex__codex`)に英語で相談してください
- Golang / Python / TypeScriptのプロジェクトでは積極的にserena mcp(`mcp__serena__read_memory`など)を活用してください

## Gitの操作に関するルール

### ファイル変更を元に戻す場合
- ファイルを直接編集して元に戻すのではなく、Gitコマンドを使用してください
  - `git stash`: 一時的に変更を退避する
  - `git restore`: 特定のファイルを前の状態に戻す
  - 理由: Claude Codeはファイルの直接的な巻き戻し操作が苦手なため、Gitの機能を活用する方が確実

### main/masterブランチでのコミット禁止
- `git commit`する際にmainブランチもしくはmasterブランチにいたら、`git commit`をやめましょう
  - 「git worktreeでworktreeを作るのを忘れていませんか?」とユーザーに指摘しましょう
  - ユーザーはブランチを切る際にgit worktreeを利用します。mainブランチもしくはmasterブランチにいたら、ユーザーが忘れている可能性が高いです

## ファイル操作に関するルール

### ファイルの新規作成・編集
- ファイルの新規作成や編集には専用ツール(Edit / Write)を使用してください
- bashのヒアドキュメントやリダイレクトを使わないでください
  - 悪い例: `cat <<EOF > file.txt`, `echo "content" > file.txt`
  - 良い例: Writeツールを使用
  - 理由: リダイレクトを使うとユーザーに許可を求める必要があり、手間がかかる
  - 専用ツールを使えば許可なしで操作できるため効率的

### コマンド出力をファイルに保存する場合
- コマンドの出力結果をファイルに保存したい場合は、`tee`と`> /dev/null`を組み合わせて使用してください
  - 悪い例: `gh pr diff > .claude/tmp/pr_diff.txt`
  - 良い例: `gh pr diff | tee .claude/tmp/pr_diff.txt > /dev/null`
  - 理由: `>`によるリダイレクトは許可が必要だが、`tee`の引数としてファイルパスを渡せば許可なしで操作できる
