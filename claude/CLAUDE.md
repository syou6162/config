## 全般的なルール

- 日本語で返答してください
- 手順が複雑になる場合、実行の前にチェックリストを作成し、方針が問題ないかをユーザーに尋ねてください
- ユーザーが「k」とだけ発言した際は「ok」や「問題ありません」の意味です
  - 一文字で入力できて便利なため、ユーザーはこういった表現を使います
- 実装中に技術的に詰まったところやわからないところ、解決できないエラーなどがあればcodex mcp(`mcp__codex__codex`)に英語で相談してください
- Golang / Python / TypeScriptのプロジェクトでは積極的にserena mcp(`mcp__serena__read_memory`など)を活用してください

## 開発手法に関するルール

### t_wada式TDD
- テストが存在するリポジトリでの実装では、t_wada式のTDD（テスト駆動開発）を実践してください
- テストが存在しないリポジトリでは、この手法を適用する必要はありません

t_wada式TDDの手順:
1. TODOリストの作成: 実装前に何をテストするかのTODOリストを作成し、小さなステップに分解
2. Red-Green-Refactorサイクル:
   - Red: 失敗するテストを先に書く
   - Green: テストが通る最小限のコードを書く
   - Refactor: コードを改善する
3. 実装アプローチ:
   - 仮実装: まず定数を返すなど最も単純な実装で緑にする
   - 三角測量: 複数のテストケースから一般化していく
   - 明白な実装: 自信があれば直接本実装を書く
4. 原則:
   - テストコードとプロダクションコードを交互に書く
   - 一度に一つのことだけに集中する
   - 小さく確実なステップで進める
   - テストが失敗している間はプロダクションコードを書かない

## Gitの操作に関するルール

### main/masterブランチでのコミット禁止
- `git commit`する際にmainブランチもしくはmasterブランチにいたら、`git commit`をやめましょう
  - 「git worktreeでworktreeを作るのを忘れていませんか?」とユーザーに指摘しましょう
  - ユーザーはブランチを切る際にgit worktreeを利用します。mainブランチもしくはmasterブランチにいたら、ユーザーが忘れている可能性が高いです

## ファイル操作に関するルール

### ファイルの新規作成・編集
- ファイルの新規作成や編集には専用ツール(Edit / Write)を使用してください
- bashのヒアドキュメントやリダイレクトを使わないでください
  - 悪い例: `cat <<EOF > file.txt`, `echo "content" > file.txt`
  - 良い例: Writeツールを使用
  - 理由: リダイレクトを使うとユーザーに許可を求める必要があり、手間がかかる
  - 専用ツールを使えば許可なしで操作できるため効率的

### コマンド出力をファイルに保存する場合
- コマンドの出力結果をファイルに保存したい場合は、`tee`と`> /dev/null`を組み合わせて使用してください
  - 悪い例: `gh pr diff > .claude/tmp/pr_diff.txt`
  - 良い例: `gh pr diff | tee .claude/tmp/pr_diff.txt > /dev/null`
  - 理由: `>`によるリダイレクトは許可が必要だが、`tee`の引数としてファイルパスを渡せば許可なしで操作できる
